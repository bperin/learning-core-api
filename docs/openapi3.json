{
  "components": {
    "schemas": {
      "artifacts.Artifact": {
        "properties": {
          "attempt_id": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          },
          "error": {
            "type": "string"
          },
          "eval_id": {
            "type": "string"
          },
          "eval_item_id": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "input_hash": {
            "type": "string"
          },
          "model": {
            "type": "string"
          },
          "prompt": {
            "type": "string"
          },
          "prompt_template_id": {
            "type": "string"
          },
          "reviewer_id": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "type": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "artifacts.ArtifactListResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/artifacts.Artifact"
            },
            "type": "array"
          },
          "pagination": {
            "$ref": "#/components/schemas/artifacts.PaginationMeta"
          }
        },
        "type": "object"
      },
      "artifacts.PaginationMeta": {
        "properties": {
          "has_next": {
            "type": "boolean"
          },
          "has_previous": {
            "type": "boolean"
          },
          "page": {
            "type": "integer"
          },
          "page_size": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          },
          "total_pages": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "authdto.TokenRequest": {
        "properties": {
          "email": {
            "example": "user@example.com",
            "type": "string"
          },
          "grant_type": {
            "example": "password",
            "type": "string"
          },
          "password": {
            "example": "secret123",
            "type": "string"
          },
          "refresh_token": {
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "type": "string"
          }
        },
        "type": "object"
      },
      "authdto.TokenResponse": {
        "properties": {
          "access_token": {
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "type": "string"
          },
          "expires_in": {
            "example": 3600,
            "type": "integer"
          },
          "refresh_token": {
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "type": "string"
          },
          "role": {
            "example": "user",
            "type": "string"
          },
          "token_type": {
            "example": "Bearer",
            "type": "string"
          }
        },
        "type": "object"
      },
      "chunking_configs.ChunkingConfig": {
        "properties": {
          "chunk_overlap": {
            "type": "integer"
          },
          "chunk_size": {
            "type": "integer"
          },
          "created_at": {
            "type": "string"
          },
          "created_by": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "version": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "chunking_configs.CreateChunkingConfigRequest": {
        "properties": {
          "chunk_overlap": {
            "type": "integer"
          },
          "chunk_size": {
            "type": "integer"
          },
          "created_by": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          }
        },
        "type": "object"
      },
      "content_discovery.BookListRequest": {
        "properties": {
          "max_books": {
            "description": "Default to 10 if not specified",
            "type": "integer"
          },
          "subject_ids": {
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "content_discovery.BookListResponse": {
        "properties": {
          "books": {
            "items": {
              "$ref": "#/components/schemas/content_discovery.BookWithSubject"
            },
            "type": "array"
          },
          "message": {
            "type": "string"
          },
          "total": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "content_discovery.BookWithSubject": {
        "properties": {
          "authors": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "pdf_link": {
            "type": "string"
          },
          "selected": {
            "type": "boolean"
          },
          "subject_id": {
            "type": "string"
          },
          "subject_name": {
            "type": "string"
          },
          "subject_url": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "model_configs.CreateModelConfigRequest": {
        "properties": {
          "created_by": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "max_tokens": {
            "type": "integer"
          },
          "mime_type": {
            "type": "string"
          },
          "model_name": {
            "type": "string"
          },
          "temperature": {
            "type": "number"
          },
          "top_k": {
            "type": "number"
          },
          "top_p": {
            "type": "number"
          }
        },
        "type": "object"
      },
      "model_configs.ModelConfig": {
        "properties": {
          "created_at": {
            "type": "string"
          },
          "created_by": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "max_tokens": {
            "type": "integer"
          },
          "mime_type": {
            "type": "string"
          },
          "model_name": {
            "type": "string"
          },
          "temperature": {
            "type": "number"
          },
          "top_k": {
            "type": "number"
          },
          "top_p": {
            "type": "number"
          },
          "version": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "prompt_templates.CreatePromptTemplateVersionRequest": {
        "properties": {
          "created_by": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "generation_type": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "metadata": {
            "type": "object"
          },
          "template": {
            "type": "string"
          },
          "title": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "prompt_templates.PromptTemplate": {
        "description": "Prompt template with versioning and activation support",
        "properties": {
          "created_at": {
            "example": "2026-01-19T03:40:00Z",
            "type": "string"
          },
          "created_by": {
            "example": "admin@example.com",
            "type": "string"
          },
          "description": {
            "example": "Classifies documents",
            "type": "string"
          },
          "generation_type": {
            "example": "CLASSIFICATION",
            "type": "string"
          },
          "id": {
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "type": "string"
          },
          "is_active": {
            "example": true,
            "type": "boolean"
          },
          "metadata": {
            "type": "object"
          },
          "template": {
            "example": "Classify the following text...",
            "type": "string"
          },
          "title": {
            "example": "Classification Prompt v1",
            "type": "string"
          },
          "updated_at": {
            "example": "2026-01-19T03:40:00Z",
            "type": "string"
          },
          "version": {
            "example": 1,
            "type": "integer"
          }
        },
        "type": "object"
      },
      "schema_templates.CreateSchemaTemplateRequest": {
        "properties": {
          "created_by": {
            "type": "string"
          },
          "generation_type": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "locked_at": {
            "type": "string"
          },
          "schema_json": {
            "type": "object"
          }
        },
        "type": "object"
      },
      "schema_templates.SchemaTemplate": {
        "description": "Schema template with versioning and activation support",
        "properties": {
          "created_at": {
            "example": "2026-01-19T03:40:00Z",
            "type": "string"
          },
          "created_by": {
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "type": "string"
          },
          "generation_type": {
            "example": "CLASSIFICATION",
            "type": "string"
          },
          "id": {
            "example": "550e8400-e29b-41d4-a716-446655440000",
            "type": "string"
          },
          "is_active": {
            "example": true,
            "type": "boolean"
          },
          "locked_at": {
            "example": "2026-01-19T03:40:00Z",
            "type": "string"
          },
          "schema_json": {
            "type": "object"
          },
          "version": {
            "example": 1,
            "type": "integer"
          }
        },
        "type": "object"
      },
      "store.GetArtifactStatsRow": {
        "properties": {
          "error_count": {
            "type": "integer"
          },
          "pending_count": {
            "type": "integer"
          },
          "ready_count": {
            "type": "integer"
          },
          "total_artifacts": {
            "type": "integer"
          },
          "with_errors": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "subjects.SubSubject": {
        "properties": {
          "created_at": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "subject_id": {
            "type": "string"
          },
          "updated_at": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "subjects.Subject": {
        "properties": {
          "created_at": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "sub_subjects": {
            "items": {
              "$ref": "#/components/schemas/subjects.SubSubject"
            },
            "type": "array"
          },
          "updated_at": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "subjects.SubjectForSelection": {
        "properties": {
          "display_name": {
            "type": "string"
          },
          "full_name": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "parent_id": {
            "type": "string"
          },
          "url": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "system_instructions.CreateSystemInstructionRequest": {
        "properties": {
          "created_by": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "text": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "system_instructions.SystemInstruction": {
        "properties": {
          "created_at": {
            "type": "string"
          },
          "created_by": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          },
          "text": {
            "type": "string"
          },
          "version": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "users.CreateUserRequest": {
        "properties": {
          "display_name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "role": {
            "$ref": "#/components/schemas/users.UserRoleType"
          }
        },
        "type": "object"
      },
      "users.SignupRequest": {
        "properties": {
          "display_name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "role": {
            "$ref": "#/components/schemas/users.UserRoleType"
          }
        },
        "type": "object"
      },
      "users.User": {
        "properties": {
          "created_at": {
            "type": "string"
          },
          "display_name": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "is_active": {
            "type": "boolean"
          }
        },
        "type": "object"
      },
      "users.UserRoleType": {
        "enum": [
          "ADMIN",
          "INSTRUCTOR",
          "LEARNER"
        ],
        "type": "string",
        "x-enum-varnames": [
          "UserRoleAdmin",
          "UserRoleInstructor",
          "UserRoleLearner"
        ]
      }
    },
    "securitySchemes": {
      "OAuth2": {
        "flows": {
          "password": {
            "scopes": {},
            "tokenUrl": "/oauth/token"
          }
        },
        "type": "oauth2"
      }
    }
  },
  "info": {
    "contact": {
      "email": "support@example.com",
      "name": "API Support"
    },
    "description": "API with password OAuth2 authentication",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "termsOfService": "https://example.com/terms/",
    "title": "Learning API",
    "version": "1.0"
  },
  "openapi": "3.0.3",
  "paths": {
    "/artifacts": {
      "get": {
        "description": "Get all artifacts with pagination support",
        "parameters": [
          {
            "description": "Page number (default: 1)",
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            }
          },
          {
            "description": "Page size (default: 20, max: 100)",
            "in": "query",
            "name": "page_size",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/artifacts.ArtifactListResponse"
                }
              }
            },
            "description": "Paginated list of artifacts"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid pagination parameters"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List all artifacts",
        "tags": [
          "Artifacts"
        ]
      }
    },
    "/artifacts/stats": {
      "get": {
        "description": "Retrieve statistics about artifacts (counts by status, etc.)",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/store.GetArtifactStatsRow"
                }
              }
            },
            "description": "Artifact statistics"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get artifact statistics",
        "tags": [
          "Artifacts"
        ]
      }
    },
    "/artifacts/status/{status}": {
      "get": {
        "description": "Retrieve artifacts filtered by their status",
        "parameters": [
          {
            "description": "Artifact status",
            "in": "path",
            "name": "status",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/artifacts.Artifact"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of artifacts"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get artifacts by status",
        "tags": [
          "Artifacts"
        ]
      }
    },
    "/artifacts/type/{type}": {
      "get": {
        "description": "Retrieve artifacts filtered by their type with pagination",
        "parameters": [
          {
            "description": "Artifact type",
            "in": "path",
            "name": "type",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "description": "Page number (default: 1)",
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer"
            }
          },
          {
            "description": "Page size (default: 20, max: 100)",
            "in": "query",
            "name": "page_size",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/artifacts.ArtifactListResponse"
                }
              }
            },
            "description": "Paginated list of artifacts"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get artifacts by type",
        "tags": [
          "Artifacts"
        ]
      }
    },
    "/artifacts/{id}": {
      "get": {
        "description": "Retrieve a specific artifact by its UUID",
        "parameters": [
          {
            "description": "Artifact ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/artifacts.Artifact"
                }
              }
            },
            "description": "Artifact details"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Artifact not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get artifact by ID",
        "tags": [
          "Artifacts"
        ]
      }
    },
    "/attempts/{id}": {
      "get": {
        "description": "Learner+Teacher+Admin. Get a test attempt by ID.",
        "parameters": [
          {
            "description": "Attempt ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get attempt",
        "tags": [
          "attempts"
        ]
      }
    },
    "/attempts/{id}/answers": {
      "post": {
        "description": "Learner-only. Submit an answer for an attempt.",
        "parameters": [
          {
            "description": "Attempt ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Submit answer",
        "tags": [
          "attempts"
        ]
      }
    },
    "/attempts/{id}/submit": {
      "post": {
        "description": "Learner-only. Submit an attempt and finalize score.",
        "parameters": [
          {
            "description": "Attempt ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Submit attempt",
        "tags": [
          "attempts"
        ]
      }
    },
    "/chunking-configs": {
      "get": {
        "description": "Get all chunking configurations",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/chunking_configs.ChunkingConfig"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of chunking configs"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List all chunking configs",
        "tags": [
          "Chunking Configs"
        ]
      },
      "post": {
        "description": "Create a new chunking configuration (immutable - cannot edit existing)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/chunking_configs.CreateChunkingConfigRequest"
              }
            }
          },
          "description": "Chunking config request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/chunking_configs.ChunkingConfig"
                }
              }
            },
            "description": "Created chunking config"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid request body"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create new chunking config",
        "tags": [
          "Chunking Configs"
        ]
      }
    },
    "/chunking-configs/active": {
      "get": {
        "description": "Retrieve the currently active chunking configuration",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/chunking_configs.ChunkingConfig"
                }
              }
            },
            "description": "Active chunking config"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Active config not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get active chunking config",
        "tags": [
          "Chunking Configs"
        ]
      }
    },
    "/chunking-configs/{id}": {
      "get": {
        "description": "Retrieve a specific chunking configuration by its UUID",
        "parameters": [
          {
            "description": "Config ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/chunking_configs.ChunkingConfig"
                }
              }
            },
            "description": "Chunking config details"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Config not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get chunking config by ID",
        "tags": [
          "Chunking Configs"
        ]
      }
    },
    "/chunking-configs/{id}/activate": {
      "post": {
        "description": "Mark a chunking configuration as active (deactivates other versions)",
        "parameters": [
          {
            "description": "Config ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Activation status"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Activate chunking config",
        "tags": [
          "Chunking Configs"
        ]
      }
    },
    "/content-discovery/books": {
      "post": {
        "description": "Fetch books from the provided subject URLs for test creation workflow. Returns book title, detail page URL, and PDF download link when available.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/content_discovery.BookListRequest"
              }
            }
          },
          "description": "Subject IDs and max books",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/content_discovery.BookListResponse"
                }
              }
            },
            "description": "List of books with subject information and PDF links"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid request body"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": []
          }
        ],
        "summary": "List books from selected subjects",
        "tags": [
          "Content Discovery"
        ]
      }
    },
    "/eval-items/{id}/reviews": {
      "get": {
        "description": "Admin-only. List review history for an eval item.",
        "parameters": [
          {
            "description": "Eval Item ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List eval item reviews",
        "tags": [
          "reviews"
        ]
      },
      "post": {
        "description": "Teacher+Admin. Submit a review verdict for an eval item.",
        "parameters": [
          {
            "description": "Eval Item ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create eval item review",
        "tags": [
          "reviews"
        ]
      }
    },
    "/evals": {
      "get": {
        "description": "Teacher+Learner. List published evals.",
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List evals",
        "tags": [
          "evals"
        ]
      },
      "post": {
        "description": "Admin-only. Create a new eval in draft.",
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create eval",
        "tags": [
          "evals"
        ]
      }
    },
    "/evals/{id}": {
      "get": {
        "description": "Teacher+Learner. Get a published eval by ID.",
        "parameters": [
          {
            "description": "Eval ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get eval",
        "tags": [
          "evals"
        ]
      }
    },
    "/evals/{id}/attempts": {
      "post": {
        "description": "Learner-only. Create a new attempt for an eval.",
        "parameters": [
          {
            "description": "Eval ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Start test attempt",
        "tags": [
          "attempts"
        ]
      }
    },
    "/evals/{id}/publish": {
      "post": {
        "description": "Admin-only. Publish a draft eval (immutable after publish).",
        "parameters": [
          {
            "description": "Eval ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "501": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not implemented"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Publish eval",
        "tags": [
          "evals"
        ]
      }
    },
    "/model-configs": {
      "get": {
        "description": "Get all model configurations",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/model_configs.ModelConfig"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of model configs"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List all model configs",
        "tags": [
          "Model Configs"
        ]
      },
      "post": {
        "description": "Create a new model configuration",
        "requestBody": {
          "content": {
            "*/*": {
              "schema": {
                "$ref": "#/components/schemas/model_configs.CreateModelConfigRequest"
              }
            }
          },
          "description": "Model config data",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/model_configs.ModelConfig"
                }
              }
            },
            "description": "Created model config"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create model config",
        "tags": [
          "Model Configs"
        ]
      }
    },
    "/model-configs/active": {
      "get": {
        "description": "Retrieve the currently active model configuration",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/model_configs.ModelConfig"
                }
              }
            },
            "description": "Active model config"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Active config not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get active model config",
        "tags": [
          "Model Configs"
        ]
      }
    },
    "/model-configs/{id}": {
      "get": {
        "description": "Retrieve a specific model configuration by its UUID",
        "parameters": [
          {
            "description": "Config ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/model_configs.ModelConfig"
                }
              }
            },
            "description": "Model config details"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Config not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get model config by ID",
        "tags": [
          "Model Configs"
        ]
      }
    },
    "/model-configs/{id}/activate": {
      "post": {
        "description": "Mark a model configuration as active",
        "parameters": [
          {
            "description": "Config ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Success message"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Config not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Activate model config",
        "tags": [
          "Model Configs"
        ]
      }
    },
    "/oauth/token": {
      "post": {
        "description": "Issue or refresh OAuth2 tokens using supported grant types.\nSupported grant types:\n- password: exchange email + password for tokens\n- refresh_token: exchange refresh_token for new access token",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/authdto.TokenRequest"
              }
            }
          },
          "description": "OAuth Token Request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/authdto.TokenResponse"
                }
              }
            },
            "description": "OAuth2 token response"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid request or unsupported grant_type"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid credentials"
          }
        },
        "summary": "OAuth token endpoint",
        "tags": [
          "auth"
        ]
      }
    },
    "/prompt-templates": {
      "get": {
        "description": "Get all prompt templates for a specific generation type",
        "parameters": [
          {
            "description": "Generation type (CLASSIFICATION or QUESTIONS)",
            "in": "query",
            "name": "generation_type",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/prompt_templates.PromptTemplate"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of prompt templates"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - missing generation_type"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List prompt templates by generation type",
        "tags": [
          "Prompt Templates"
        ]
      },
      "post": {
        "description": "Create a new version of a prompt template (immutable - cannot edit existing)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/prompt_templates.CreatePromptTemplateVersionRequest"
              }
            }
          },
          "description": "Template version request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/prompt_templates.PromptTemplate"
                }
              }
            },
            "description": "Created prompt template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid request body"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create new prompt template version",
        "tags": [
          "Prompt Templates"
        ]
      }
    },
    "/prompt-templates/generation-type/{generationType}": {
      "get": {
        "description": "Retrieve the currently active prompt template for a specific generation type",
        "parameters": [
          {
            "description": "Generation type (CLASSIFICATION or QUESTIONS)",
            "in": "path",
            "name": "generationType",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/prompt_templates.PromptTemplate"
                }
              }
            },
            "description": "Active prompt template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - missing generation_type"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Active template not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get active prompt template by generation type",
        "tags": [
          "Prompt Templates"
        ]
      }
    },
    "/prompt-templates/{id}": {
      "get": {
        "description": "Retrieve a specific prompt template by its UUID",
        "parameters": [
          {
            "description": "Template ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/prompt_templates.PromptTemplate"
                }
              }
            },
            "description": "Prompt template details"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Template not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get prompt template by ID",
        "tags": [
          "Prompt Templates"
        ]
      }
    },
    "/prompt-templates/{id}/activate": {
      "post": {
        "description": "Mark a prompt template version as active (deactivates other versions)",
        "parameters": [
          {
            "description": "Template ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/prompt_templates.PromptTemplate"
                }
              }
            },
            "description": "Activated prompt template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Activate prompt template",
        "tags": [
          "Prompt Templates"
        ]
      }
    },
    "/prompt-templates/{id}/deactivate": {
      "post": {
        "description": "Mark a prompt template version as inactive",
        "parameters": [
          {
            "description": "Template ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/prompt_templates.PromptTemplate"
                }
              }
            },
            "description": "Deactivated prompt template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Deactivate prompt template",
        "tags": [
          "Prompt Templates"
        ]
      }
    },
    "/schema-templates": {
      "get": {
        "description": "Get all schema templates for a specific generation type",
        "parameters": [
          {
            "description": "Generation type (CLASSIFICATION or QUESTIONS)",
            "in": "query",
            "name": "generation_type",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/schema_templates.SchemaTemplate"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of schema templates"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - missing generation_type"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List schema templates by generation type",
        "tags": [
          "Schema Templates"
        ]
      },
      "post": {
        "description": "Create a new schema template (immutable - cannot edit existing)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/schema_templates.CreateSchemaTemplateRequest"
              }
            }
          },
          "description": "Schema template request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/schema_templates.SchemaTemplate"
                }
              }
            },
            "description": "Created schema template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid request body"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create new schema template",
        "tags": [
          "Schema Templates"
        ]
      }
    },
    "/schema-templates/generation-type/{generationType}": {
      "get": {
        "description": "Retrieve the currently active schema template for a specific generation type",
        "parameters": [
          {
            "description": "Generation type (CLASSIFICATION or QUESTIONS)",
            "in": "path",
            "name": "generationType",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/schema_templates.SchemaTemplate"
                }
              }
            },
            "description": "Active schema template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - missing generation_type"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Active template not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get active schema template by generation type",
        "tags": [
          "Schema Templates"
        ]
      }
    },
    "/schema-templates/{id}": {
      "get": {
        "description": "Retrieve a specific schema template by its UUID",
        "parameters": [
          {
            "description": "Template ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/schema_templates.SchemaTemplate"
                }
              }
            },
            "description": "Schema template details"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Template not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get schema template by ID",
        "tags": [
          "Schema Templates"
        ]
      }
    },
    "/schema-templates/{id}/activate": {
      "post": {
        "description": "Mark a schema template version as active (deactivates other versions)",
        "parameters": [
          {
            "description": "Template ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/schema_templates.SchemaTemplate"
                }
              }
            },
            "description": "Activated schema template"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Activate schema template",
        "tags": [
          "Schema Templates"
        ]
      }
    },
    "/signup": {
      "post": {
        "description": "Create a new user account with email, password, and role",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/users.SignupRequest"
              }
            }
          },
          "description": "Signup Request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/users.User"
                }
              }
            },
            "description": "Created"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid request"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "summary": "Sign up a new user",
        "tags": [
          "users"
        ]
      }
    },
    "/subjects": {
      "get": {
        "description": "Retrieve all academic subjects with their nested sub-subjects",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/subjects.Subject"
                  },
                  "type": "array"
                }
              }
            },
            "description": "OK"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List all subjects",
        "tags": [
          "subjects"
        ]
      }
    },
    "/subjects/for-selection": {
      "get": {
        "description": "Retrieve subjects formatted for selection UI (tag cloud style)",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/subjects.SubjectForSelection"
                  },
                  "type": "array"
                }
              }
            },
            "description": "OK"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List subjects for test creation selection",
        "tags": [
          "subjects"
        ]
      }
    },
    "/system-instructions": {
      "get": {
        "description": "Get all system instructions",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/system_instructions.SystemInstruction"
                  },
                  "type": "array"
                }
              }
            },
            "description": "List of system instructions"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "List all system instructions",
        "tags": [
          "System Instructions"
        ]
      },
      "post": {
        "description": "Create a new system instruction (immutable - cannot edit existing)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/system_instructions.CreateSystemInstructionRequest"
              }
            }
          },
          "description": "System instruction request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/system_instructions.SystemInstruction"
                }
              }
            },
            "description": "Created system instruction"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid request body"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create new system instruction",
        "tags": [
          "System Instructions"
        ]
      }
    },
    "/system-instructions/active": {
      "get": {
        "description": "Retrieve the currently active system instruction",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/system_instructions.SystemInstruction"
                }
              }
            },
            "description": "Active system instruction"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Active instruction not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get active system instruction",
        "tags": [
          "System Instructions"
        ]
      }
    },
    "/system-instructions/{id}": {
      "get": {
        "description": "Retrieve a specific system instruction by its UUID",
        "parameters": [
          {
            "description": "Instruction ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/system_instructions.SystemInstruction"
                }
              }
            },
            "description": "System instruction details"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Instruction not found"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get system instruction by ID",
        "tags": [
          "System Instructions"
        ]
      }
    },
    "/system-instructions/{id}/activate": {
      "post": {
        "description": "Mark a system instruction as active (deactivates other versions)",
        "parameters": [
          {
            "description": "Instruction ID (UUID)",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Activation status"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Bad request - invalid ID format"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "Internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Activate system instruction",
        "tags": [
          "System Instructions"
        ]
      }
    },
    "/users": {
      "post": {
        "description": "Create a new user with the provided details",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/users.CreateUserRequest"
              }
            }
          },
          "description": "Create User Request",
          "required": true,
          "x-originalParamName": "request"
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/users.User"
                }
              }
            },
            "description": "Created"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid request"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Create a new user",
        "tags": [
          "users"
        ]
      }
    },
    "/users/email/{email}": {
      "get": {
        "description": "Retrieve a specific user by their email address",
        "parameters": [
          {
            "description": "User Email",
            "in": "path",
            "name": "email",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/users.User"
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid request"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get user by email",
        "tags": [
          "users"
        ]
      }
    },
    "/users/me": {
      "get": {
        "description": "Retrieve the current user's profile from their JWT token",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/users.User"
                }
              }
            },
            "description": "OK"
          },
          "401": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "unauthorized"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get current authenticated user",
        "tags": [
          "users"
        ]
      }
    },
    "/users/{id}": {
      "delete": {
        "description": "Remove a user from the system",
        "parameters": [
          {
            "description": "User ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid request"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "write"
            ]
          }
        ],
        "summary": "Delete user",
        "tags": [
          "users"
        ]
      },
      "get": {
        "description": "Retrieve a specific user by their unique ID",
        "parameters": [
          {
            "description": "User ID",
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/users.User"
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "invalid request"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "not found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": "internal server error"
          }
        },
        "security": [
          {
            "OAuth2": [
              "read"
            ]
          }
        ],
        "summary": "Get user by ID",
        "tags": [
          "users"
        ]
      }
    }
  },
  "servers": [
    {
      "url": "https://localhost:8080/"
    }
  ]
}